{
    "collab_server" : "",
    "contents" : "---\ntitle: \"HW#3\"\nauthor: \"juan\"\ndate: '2017-09-27'\noutput: github_document\n---\n\n```{r}\nlibrary(gapminder)\nlibrary(tidyverse)\n```\n\n### Welcome to HW#3 \n+ Instruction: Get the maximum and minimum of GDP per capita for all continents.\n\n##### In the table, we can see the MEAN, MAX and MIN gdps per capita in all the continents. \n```{r}\ngdps<- gapminder %>%\n  group_by(continent) %>% \n  select(gdpPercap) %>% \nsummarise(mean_gdp= mean(gdpPercap),max_gdp= max(gdpPercap), min_gdp= min(gdpPercap) ) \ngdps %>% \n  knitr::kable(format = \"markdown\", padding=2, caption= \"MEAN, MAX and MIN gdps per capita\")\n```\n\n\n##### There is a lot of contrast in Asia's gdps. It has extreme numbers, the hights and the second lowest gdps in all time.\n```{r}\ngapminder %>%\n  group_by(continent) %>% \n  ggplot(aes(year, gdpPercap, color= continent))+\n  geom_smooth(method=\"loess\", span=0.5)+ geom_point()\n```\n\n\n+ Instruction: Compute a trimmed mean of life expectancy for different years. Or a weighted mean, weighting by population. Just try something other than the plain vanilla mean.\n\n##### Here I calculated both the **trimmed** and **weighted** mean of the life expectancy per year. \n\n```{r}\nmeans<- gapminder %>%\n  group_by(year) %>%\n  summarize(tm_lifeExp = mean(lifeExp, trim= 0.2), wmean= weighted.mean(lifeExp, pop)) \nmeans %>% \n  knitr::kable(format = \"markdown\", padding=2, caption= \"Trimmed and weighted means\")\ngapminder %>%\n  group_by(continent) %>% \n  ggplot(aes(year,gdpPercap)) + \n  geom_boxplot(aes(color= continent)) + \n  scale_y_log10() \n```\n\n+ Instruction: How is life expectancy changing over time on different continents?\n\n##### Life expectancy is increasing in most countries. Understandably, countries with low GDP per capita and countries facing internal conflicts (with war or diseases) seem slower growth and setbacks.\n\n```{r}\nggplot(gapminder, aes(lifeExp, year , size= gdpPercap, color= continent)) +\n    facet_grid(~ continent) +\n    geom_point(alpha= 0.3)\n```\n\n\n+ Instruction: Report the absolute and/or relative abundance of countries with low life expectancy over time by continent: Compute some measure of worldwide life expectancy â€“ you decide \n\n The benchmark for the analysis is the mean life expectancy (59.47444). I will devide the results in **high** life expectancy if it is higher than the mean or **low** if otherwise.\n\n```{r}\nmean(gapminder$lifeExp)\ngapminder %>%\n  arrange(year, lifeExp) %>% \n  mutate(l_ex=ifelse(lifeExp< mean(lifeExp), \"low\", \"high\")) \n\n```\n\n```{r}\ngapminder %>%\n  arrange(year, lifeExp) %>% \n  mutate(l_ex=ifelse(lifeExp<= mean(lifeExp), \"low\", \"high\")) %>% \n  ggplot(aes( pop, year, color=lifeExp)) +\n    facet_grid(l_ex ~ continent) +\n    geom_point(alpha= 0.5)+ \n  geom_smooth(method=\"loess\", span=1)\n```\n\n\n+ Instruction:Find countries with interesting stories. Open-ended and, therefore, hard. Promising but unsuccessful attempts are encouraged.\n\n+ Countries with painfully low life expectancy due to various factors such as **war**, **diseases** or **scarcity** of resources. The crisis in Rwanda brought the life expectancy to aprox. 23.59  in the 90's.\n```{r}\ngapminder %>%\n  filter(lifeExp<= 35) %>% \n  arrange(year, lifeExp) %>% \n  ggplot(aes(year, lifeExp, size= pop)) +\n    geom_point(aes(color= country, alpha= 0.1))\n```\n\n+ Instruction: Make up your own! Between the dplyr coverage in class and the list above, I think you get the idea.\n\n##### The 10 countries with the lowest life expectancy growth. \n```{r}\ngapminder %>%\n  group_by(country) %>% \n  select(country, year, lifeExp) %>% \n  mutate(lifeExp_growth = lifeExp - first(lifeExp)) %>% \n  arrange(lifeExp_growth) %>% head(10) %>% \n  knitr::kable(format = \"markdown\", padding=2, caption= \"Life expectancy growth\")\n```\n\n##### The three countries with lowest life expentancy in 2007.\n```{r}\ngapminder %>%\narrange(lifeExp) %>% \nfilter(year== 2007) %>% \n  head(3) %>% knitr::kable()\n```\n\n##### Swaziland had the lowest life expectancy in 2007. However, compared to Mozambique and Zambia (the next two countries in the list), its gdp Per capita is high.\n```{r}\ngapminder %>%\n  filter(country== \"Swaziland\" | country== \"Mozambique\" | country== \"Zambia\" ) %>% \n  select(country, year, lifeExp, gdpPercap ) %>%\nggplot( aes(year , gdpPercap)) +\n    geom_point(aes(size=lifeExp , shape= country, color= country ))+\n  stat_smooth(method=\"lm\")\n  \n```\n\n## Reflection\n1_ I need to refresh my knowledge in statistics in order to understand what linear regression, or any regression, means and what it indicates. So far, I have made advance in the aesthetics part (colors, shapes, different types of graphs). I liked the peer reviews because i could see the progress of other people and learn from the way they read data and interpret the results; i still need to work more on that.\n\n2_ It is really fun to explore this dataset, it tells lots of stories. I found a little trouble plotting all the countries at the same time because it is a lots of datapoints and the graphs and labels overlap too much. I find that low alphatransparency helps us seeing the overlaps which is important. \n\n3_ I tried to write  most of the code using piping but sometimes I used the simple nested functions just to try everything. \n\n4_ I learned the hard way that <- and = can not be used interchangably to define variables, as I learned in my first R course. They throw different results when used in nested functions.\n",
    "created" : 1506536114626.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3776928928",
    "id" : "805E8F54",
    "lastKnownWriteTime" : 1507707567,
    "last_content_update" : 1507707567,
    "path" : "~/HMW#4/HW3.Rmd",
    "project_path" : "HW3.Rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}