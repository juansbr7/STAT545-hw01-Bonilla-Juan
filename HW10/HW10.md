LIBR539J Assignment 2: Data Management and Curation
================
Juan Bonilla
2018-02-26

*Dataset hosted at:*

<https://demo.ckan.org/dataset/7ae55b5b-ae43-4ea0-89dc-4601d566b016/resource/f18c23d1-0207-4ac3-805a-ce679cc6992c/download/bird-sightings-in-america.csv>

**Selection, processing and cleaning of the dataset**

The purpose of this exercise is to study bird sightings and a relationship with human population in America. I will start the study with the **Hypothesis** that countries with higher population have a higher number of bird sightings. Using data collected from two different sources and different methods for data wrangling with R, I will test this hypothesis to prove it true or to discard it. The motivation for this project aligns with the goals of ebirds.org which seeks to keep track of bird species, find more birds, explore latest sightings and contributing data to science and conservation. Throughout this exercise, I will do different calculations such as population density per country and the total number of bird sightings per species and per country. The results of these operations will be visualized using the ggplot library available in R and the spatial data will be visualized using google fusion tables and its embedded map options.

\*\* Spacial data visualizations at:\*\* <https://fusiontables.google.com/DataSource?docid=1_NQunLWq9CQNITnWXXhdn3c5c9LUxfzP5y_a0fqw#rows:id=1>

### Resources:

-   R MArkdown for document design
-   R Studio for programming.
-   R libraries for visualization (ggplot, RColorBrewer, formattable, knitr)
-   R libraries for data wrangling (tidyverse, dplyr, xml2, httr, rvest, curl)
-   R libraries for data collection (geonames, rebird)
-   Google fusion tables for merging data tables and spacial data visualization.
-   Ckan for hosting the dataset

### STEP 1 Collecting and cleaning data:

-   Data was collected by making requests to two different APIs: geonames and rebird (ebird for R).
-   The GeoNames geographical database covers all countries and contains over eleven million placenames that are available for download free of charge. More information can be found at: <http://www.geonames.org>
-   eBird is the worldâ€™s largest biodiversity-related citizen science project, with more than 100 million bird sightings contributed each year by eBirders around the world.

**LOADING THE NECESSARY LIBRARIES**

``` r
suppressWarnings(suppressMessages(easypackages::libraries("ggplot2", "xml2", "tidyverse", "geonames", "rebird", "httr", "rplos", "curl", "rvest", "stringr", "knitr", "kableExtra", "formattable", "RColorBrewer")))
```

To start, I need to request general information about countries to the *geonames API* using the following code:

geon&lt;- GET("<http://api.geonames.org/countryInfo?username>=") *this part of the code is hiden to protect my user ID and password.*

The API returns the results of the query in XML format:

``` r
xml_country<- read_xml(content(geon, as = "text"))
```

To access the text inside the XML document I need to create a chunk of code that goes inside the lists takes the text and create a vector with the names of the nodes that I need. After, extracting the text form those nodes, I create a data frame with the list and assigning names to the columns.

``` r
countryinfo<- c("//countryCode", "//countryName", "//continentName",  "//population", "//areaInSqKm" )
output<- list()
for (i in seq_along(countryinfo)) {
  output[[i]]<- (xml_text(xml_find_all(xml_country,countryinfo[[i]])))}
dfcountries<- data.frame(output)
names(dfcountries)<- str_trim(str_replace(countryinfo, "//", ""))
dfcountries %>% head(10) %>%  kable( "html") %>%
  kable_styling(full_width = F) %>%
  column_spec(1:2, bold = T, border_right = T) %>%
  column_spec(2, width = "10em")
```

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
countryCode
</th>
<th style="text-align:left;">
countryName
</th>
<th style="text-align:left;">
continentName
</th>
<th style="text-align:left;">
population
</th>
<th style="text-align:left;">
areaInSqKm
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
AD
</td>
<td style="text-align:left;font-weight: bold;border-right:1px solid;width: 10em; ">
Andorra
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:left;">
84000
</td>
<td style="text-align:left;">
468.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
AE
</td>
<td style="text-align:left;font-weight: bold;border-right:1px solid;width: 10em; ">
United Arab Emirates
</td>
<td style="text-align:left;">
Asia
</td>
<td style="text-align:left;">
4975593
</td>
<td style="text-align:left;">
82880.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
AF
</td>
<td style="text-align:left;font-weight: bold;border-right:1px solid;width: 10em; ">
Afghanistan
</td>
<td style="text-align:left;">
Asia
</td>
<td style="text-align:left;">
29121286
</td>
<td style="text-align:left;">
647500.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
AG
</td>
<td style="text-align:left;font-weight: bold;border-right:1px solid;width: 10em; ">
Antigua and Barbuda
</td>
<td style="text-align:left;">
North America
</td>
<td style="text-align:left;">
86754
</td>
<td style="text-align:left;">
443.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
AI
</td>
<td style="text-align:left;font-weight: bold;border-right:1px solid;width: 10em; ">
Anguilla
</td>
<td style="text-align:left;">
North America
</td>
<td style="text-align:left;">
13254
</td>
<td style="text-align:left;">
102.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
AL
</td>
<td style="text-align:left;font-weight: bold;border-right:1px solid;width: 10em; ">
Albania
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:left;">
2986952
</td>
<td style="text-align:left;">
28748.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
AM
</td>
<td style="text-align:left;font-weight: bold;border-right:1px solid;width: 10em; ">
Armenia
</td>
<td style="text-align:left;">
Asia
</td>
<td style="text-align:left;">
2968000
</td>
<td style="text-align:left;">
29800.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
AO
</td>
<td style="text-align:left;font-weight: bold;border-right:1px solid;width: 10em; ">
Angola
</td>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:left;">
13068161
</td>
<td style="text-align:left;">
1246700.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
AQ
</td>
<td style="text-align:left;font-weight: bold;border-right:1px solid;width: 10em; ">
Antarctica
</td>
<td style="text-align:left;">
Antarctica
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
1.4E7
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
AR
</td>
<td style="text-align:left;font-weight: bold;border-right:1px solid;width: 10em; ">
Argentina
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:left;">
41343201
</td>
<td style="text-align:left;">
2766890.0
</td>
</tr>
</tbody>
</table>
-   Here we can see that I have 250 observations (that how R calls records) with 5 variables (that's how R calls attributes). Here I can also see the format of each variable: *factors*. *Factor* is a data type for text that uses levels to group categories. For Example, the variable continent has 250 observations but 7 levels because there are only 7 continents. One of the problems that I see here is that population and areaInSqKm are numbers so it does not make sense that they are in *factor* format.

``` r
str(dfcountries)
```

    ## 'data.frame':    250 obs. of  5 variables:
    ##  $ countryCode  : Factor w/ 250 levels "AD","AE","AF",..: 1 2 3 4 5 6 7 8 9 10 ...
    ##  $ countryName  : Factor w/ 250 levels "Afghanistan",..: 6 237 1 10 8 3 12 7 9 11 ...
    ##  $ continentName: Factor w/ 7 levels "Africa","Antarctica",..: 4 3 3 5 5 4 3 1 2 7 ...
    ##  $ population   : Factor w/ 247 levels "0","10065","10112453",..: 227 169 107 230 30 112 111 29 1 144 ...
    ##  $ areaInSqKm   : Factor w/ 246 levels "0.0","0.44","1.4E7",..: 169 229 205 160 9 119 121 36 3 113 ...

Data cleaning requires not only removing unwanted characters but checking the format of the data. Population and areaInSqKm were imported as *factors* because these variables have characters mixed with numbers in some fields. That's a problem because I need them as *numeric* to do calculations and arrange them. To fix these issue, I identify the conflicting data field, filter them out (if they are not needed) or change them to *character* format. In the code chunk below, I selected countries in America (North and South), mutated the factor type fields into character and then into *numeric* (did not work directly from factor to numeric). The highlighted columns are in *numeric* type.

``` r
dfcountry<- dfcountries %>% 
  filter(continentName %in% c("South America", "North America")) %>% droplevels() %>% 
  mutate(pop= as.numeric(as.character(population)), area=as.numeric(as.character(areaInSqKm))) 
dfcountry  %>% 
  select(-population, -areaInSqKm) %>%  arrange(desc(pop)) %>% head(15) %>% kable( "html") %>%
  kable_styling(full_width = F) %>%
  column_spec(4:5, width = "10em", background = "lightgreen") 
```

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
countryCode
</th>
<th style="text-align:left;">
countryName
</th>
<th style="text-align:left;">
continentName
</th>
<th style="text-align:right;">
pop
</th>
<th style="text-align:right;">
area
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
US
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
North America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
310232863
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
9629091
</td>
</tr>
<tr>
<td style="text-align:left;">
BR
</td>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
201103330
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
8511965
</td>
</tr>
<tr>
<td style="text-align:left;">
MX
</td>
<td style="text-align:left;">
Mexico
</td>
<td style="text-align:left;">
North America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
112468855
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
1972550
</td>
</tr>
<tr>
<td style="text-align:left;">
CO
</td>
<td style="text-align:left;">
Colombia
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
47790000
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
1138910
</td>
</tr>
<tr>
<td style="text-align:left;">
AR
</td>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
41343201
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
2766890
</td>
</tr>
<tr>
<td style="text-align:left;">
CA
</td>
<td style="text-align:left;">
Canada
</td>
<td style="text-align:left;">
North America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
33679000
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
9984670
</td>
</tr>
<tr>
<td style="text-align:left;">
PE
</td>
<td style="text-align:left;">
Peru
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
29907003
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
1285220
</td>
</tr>
<tr>
<td style="text-align:left;">
VE
</td>
<td style="text-align:left;">
Venezuela
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
27223228
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
912050
</td>
</tr>
<tr>
<td style="text-align:left;">
CL
</td>
<td style="text-align:left;">
Chile
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
16746491
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
756950
</td>
</tr>
<tr>
<td style="text-align:left;">
EC
</td>
<td style="text-align:left;">
Ecuador
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
14790608
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
283560
</td>
</tr>
<tr>
<td style="text-align:left;">
GT
</td>
<td style="text-align:left;">
Guatemala
</td>
<td style="text-align:left;">
North America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
13550440
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
108890
</td>
</tr>
<tr>
<td style="text-align:left;">
CU
</td>
<td style="text-align:left;">
Cuba
</td>
<td style="text-align:left;">
North America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
11423000
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
110860
</td>
</tr>
<tr>
<td style="text-align:left;">
BO
</td>
<td style="text-align:left;">
Bolivia
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
9947418
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
1098580
</td>
</tr>
<tr>
<td style="text-align:left;">
DO
</td>
<td style="text-align:left;">
Dominican Republic
</td>
<td style="text-align:left;">
North America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
9823821
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
48730
</td>
</tr>
<tr>
<td style="text-align:left;">
HT
</td>
<td style="text-align:left;">
Haiti
</td>
<td style="text-align:left;">
North America
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
9648924
</td>
<td style="text-align:right;width: 10em; background-color: lightgreen;">
27750
</td>
</tr>
</tbody>
</table>
Now that I have the information of all the 55 countries in America, I need to calculate the population density of each country which is equivalent to dividing the population by area. I will find the top 10 countries with the higher population and visualize the density distribution.

``` r
dfcountries2<- dfcountry%>% select(countryCode, countryName, pop, area) %>% 
  droplevels() %>% arrange(desc(pop, area)) %>% head(10) %>% 
  mutate(density= pop/area) 
dfcountries2%>% kable( "html") %>%
  kable_styling(full_width = F) %>%
  column_spec(5, background = "lightgreen") 
```

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
countryCode
</th>
<th style="text-align:left;">
countryName
</th>
<th style="text-align:right;">
pop
</th>
<th style="text-align:right;">
area
</th>
<th style="text-align:right;">
density
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
US
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:right;">
310232863
</td>
<td style="text-align:right;">
9629091
</td>
<td style="text-align:right;background-color: lightgreen;">
32.218292
</td>
</tr>
<tr>
<td style="text-align:left;">
BR
</td>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:right;">
201103330
</td>
<td style="text-align:right;">
8511965
</td>
<td style="text-align:right;background-color: lightgreen;">
23.625958
</td>
</tr>
<tr>
<td style="text-align:left;">
MX
</td>
<td style="text-align:left;">
Mexico
</td>
<td style="text-align:right;">
112468855
</td>
<td style="text-align:right;">
1972550
</td>
<td style="text-align:right;background-color: lightgreen;">
57.016986
</td>
</tr>
<tr>
<td style="text-align:left;">
CO
</td>
<td style="text-align:left;">
Colombia
</td>
<td style="text-align:right;">
47790000
</td>
<td style="text-align:right;">
1138910
</td>
<td style="text-align:right;background-color: lightgreen;">
41.961173
</td>
</tr>
<tr>
<td style="text-align:left;">
AR
</td>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:right;">
41343201
</td>
<td style="text-align:right;">
2766890
</td>
<td style="text-align:right;background-color: lightgreen;">
14.942120
</td>
</tr>
<tr>
<td style="text-align:left;">
CA
</td>
<td style="text-align:left;">
Canada
</td>
<td style="text-align:right;">
33679000
</td>
<td style="text-align:right;">
9984670
</td>
<td style="text-align:right;background-color: lightgreen;">
3.373071
</td>
</tr>
<tr>
<td style="text-align:left;">
PE
</td>
<td style="text-align:left;">
Peru
</td>
<td style="text-align:right;">
29907003
</td>
<td style="text-align:right;">
1285220
</td>
<td style="text-align:right;background-color: lightgreen;">
23.269948
</td>
</tr>
<tr>
<td style="text-align:left;">
VE
</td>
<td style="text-align:left;">
Venezuela
</td>
<td style="text-align:right;">
27223228
</td>
<td style="text-align:right;">
912050
</td>
<td style="text-align:right;background-color: lightgreen;">
29.848394
</td>
</tr>
<tr>
<td style="text-align:left;">
CL
</td>
<td style="text-align:left;">
Chile
</td>
<td style="text-align:right;">
16746491
</td>
<td style="text-align:right;">
756950
</td>
<td style="text-align:right;background-color: lightgreen;">
22.123642
</td>
</tr>
<tr>
<td style="text-align:left;">
EC
</td>
<td style="text-align:left;">
Ecuador
</td>
<td style="text-align:right;">
14790608
</td>
<td style="text-align:right;">
283560
</td>
<td style="text-align:right;background-color: lightgreen;">
52.160418
</td>
</tr>
</tbody>
</table>
To understand the dataset better, I will create a chart to see data from a different perspective. Here we get some see that: the United States has the highest population, Canada is the biggest country and has the lowest population density. On the other hand, Mexico and Ecuador are the most densely populated countries. Argentina has a low density since the area in squareKm is extensive (more than double than Colombia) and the population not very large (lower than Colombia).

``` r
dfcountries2 %>% ggplot(aes(x= pop/10^6, y= area/10^6))+ 
  geom_point(aes(colour= countryName, size= density))+ 
  labs(x= "Population in Millions", y= "Area in millions square Kms")+
  scale_colour_manual(values=brewer.pal(n=10, "Paired"))
```

![](HW10_files/figure-markdown_github/unnamed-chunk-8-1.png)

Based on this early results and following the initial hypothesis, we would expect to see the highest number of bird sightings from the United States and Brazil. To test that, I will get the bird sighting data from ebirds API.

### STEP 2 Collecting and cleaning data from rebirds

This procedure to query data from ebirds API is slightly different than the one I used before. Ebirds has a R library with a number of R functions to query data depending on different variables. Here, I will use region (ebirdregion function) since I am interested in the places (countries) where the sighting occurred. In the code chunk below, I called the ebirdregion function and I fed it with the list of countries that I am interested in.

``` r
birds_countries<- list()
for (i in seq_along(dfcountries2$countryCode)) {
  birds_countries[[i]]<- ebirdregion(region = (as.character(dfcountries2$countryCode[[i]])),
                                     regtype = "country")}
names(birds_countries)<- dfcountries2$countryCode
```

The result of the query is a data frame with 940 observations and 12 variables. These variables include the scientific and common name of bird species, the number bird per observation, whether the observation is valid or reviewed, the region of the sighting, the country and the coordinates.

``` r
names(birds_countries$US)
```

    ##  [1] "lng"             "locName"         "howMany"        
    ##  [4] "sciName"         "obsValid"        "locationPrivate"
    ##  [7] "obsDt"           "obsReviewed"     "comName"        
    ## [10] "lat"             "locID"           "locId"

The variable howMany refers to the number of birds in each sighting (default ebird name). The format of this variable is integer but it has NA values (Not Applicable). This is a problem because in R every operation that involves a NA will result in NA as result. I need to calculate the total number of observation per country and species so to avoid NA results I need replace NA values for 0s. Notice here that when I bound all the list into a data frame, R created an index with the name of the list (initials of the country) and a numeric value.

``` r
df <- do.call("rbind", lapply(birds_countries, data.frame))
df$howMany[is.na(df$howMany)] <- 0
df<-df %>% select(c(-locId, -locID, -obsDt, -locationPrivate )) 
df%>%  
  head(5) %>% kable( "html") %>%
  kable_styling(full_width = F) %>% 
  column_spec(1, background = "lightyellow")
```

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
lng
</th>
<th style="text-align:left;">
locName
</th>
<th style="text-align:right;">
howMany
</th>
<th style="text-align:left;">
sciName
</th>
<th style="text-align:left;">
obsValid
</th>
<th style="text-align:left;">
obsReviewed
</th>
<th style="text-align:left;">
comName
</th>
<th style="text-align:right;">
lat
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;background-color: lightyellow;">
US.1
</td>
<td style="text-align:right;">
-94.00177
</td>
<td style="text-align:left;">
Ravine to Winterset Reservoir
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Corvus brachyrhynchos
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
American Crow
</td>
<td style="text-align:right;">
41.37636
</td>
</tr>
<tr>
<td style="text-align:left;background-color: lightyellow;">
US.2
</td>
<td style="text-align:right;">
-94.00177
</td>
<td style="text-align:left;">
Ravine to Winterset Reservoir
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Agelaius phoeniceus
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
Red-winged Blackbird
</td>
<td style="text-align:right;">
41.37636
</td>
</tr>
<tr>
<td style="text-align:left;background-color: lightyellow;">
US.3
</td>
<td style="text-align:right;">
-94.00177
</td>
<td style="text-align:left;">
Ravine to Winterset Reservoir
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Melanerpes erythrocephalus
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
Red-headed Woodpecker
</td>
<td style="text-align:right;">
41.37636
</td>
</tr>
<tr>
<td style="text-align:left;background-color: lightyellow;">
US.4
</td>
<td style="text-align:right;">
-94.00177
</td>
<td style="text-align:left;">
Ravine to Winterset Reservoir
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Melanerpes carolinus
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
Red-bellied Woodpecker
</td>
<td style="text-align:right;">
41.37636
</td>
</tr>
<tr>
<td style="text-align:left;background-color: lightyellow;">
US.5
</td>
<td style="text-align:right;">
-94.00177
</td>
<td style="text-align:left;">
Ravine to Winterset Reservoir
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Colaptes auratus
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
Northern Flicker
</td>
<td style="text-align:right;">
41.37636
</td>
</tr>
</tbody>
</table>
That is nice but I do need the initials of the countries in the index so I will turn it into a column and use *regular expressions* to remove the numeric values.

\*\* regular expressions (regex or regexp for short) is a special text string for identifying a pattern and modify it.

``` r
df2<-df %>% mutate(countryCode= rownames(df))
 ## keeps the first group (first two characters)
df2$countryCode<- str_replace_all(df2$countryCode,"(^..)(.+)", "\\1") %>%  
  as.factor()
df2 %>% 
  head(5) %>% kable( "html") %>%
  kable_styling(full_width = F) %>% 
  column_spec(9, background = "lightyellow")
```

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
lng
</th>
<th style="text-align:left;">
locName
</th>
<th style="text-align:right;">
howMany
</th>
<th style="text-align:left;">
sciName
</th>
<th style="text-align:left;">
obsValid
</th>
<th style="text-align:left;">
obsReviewed
</th>
<th style="text-align:left;">
comName
</th>
<th style="text-align:right;">
lat
</th>
<th style="text-align:left;">
countryCode
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
-94.00177
</td>
<td style="text-align:left;">
Ravine to Winterset Reservoir
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Corvus brachyrhynchos
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
American Crow
</td>
<td style="text-align:right;">
41.37636
</td>
<td style="text-align:left;background-color: lightyellow;">
US
</td>
</tr>
<tr>
<td style="text-align:right;">
-94.00177
</td>
<td style="text-align:left;">
Ravine to Winterset Reservoir
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Agelaius phoeniceus
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
Red-winged Blackbird
</td>
<td style="text-align:right;">
41.37636
</td>
<td style="text-align:left;background-color: lightyellow;">
US
</td>
</tr>
<tr>
<td style="text-align:right;">
-94.00177
</td>
<td style="text-align:left;">
Ravine to Winterset Reservoir
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Melanerpes erythrocephalus
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
Red-headed Woodpecker
</td>
<td style="text-align:right;">
41.37636
</td>
<td style="text-align:left;background-color: lightyellow;">
US
</td>
</tr>
<tr>
<td style="text-align:right;">
-94.00177
</td>
<td style="text-align:left;">
Ravine to Winterset Reservoir
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Melanerpes carolinus
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
Red-bellied Woodpecker
</td>
<td style="text-align:right;">
41.37636
</td>
<td style="text-align:left;background-color: lightyellow;">
US
</td>
</tr>
<tr>
<td style="text-align:right;">
-94.00177
</td>
<td style="text-align:left;">
Ravine to Winterset Reservoir
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Colaptes auratus
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
Northern Flicker
</td>
<td style="text-align:right;">
41.37636
</td>
<td style="text-align:left;background-color: lightyellow;">
US
</td>
</tr>
</tbody>
</table>
Here, I'm grouping the birds per name and calculated the 10 species most commonly seen in all six countries by common name and scientific name.

``` r
df2  %>% group_by(comName, sciName) %>% 
  summarise(mostseen= sum(howMany)) %>%  
  arrange(desc(mostseen)) %>% head(10) %>%kable( "html") %>%  
  kable_styling("striped", full_width = F) %>%
  row_spec(1, bold = T, color = "white", background = "green")
```

<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
comName
</th>
<th style="text-align:left;">
sciName
</th>
<th style="text-align:right;">
mostseen
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: white;background-color: green;">
Peruvian Booby
</td>
<td style="text-align:left;font-weight: bold;color: white;background-color: green;">
Sula variegata
</td>
<td style="text-align:right;font-weight: bold;color: white;background-color: green;">
10004
</td>
</tr>
<tr>
<td style="text-align:left;">
Guanay Cormorant
</td>
<td style="text-align:left;">
Phalacrocorax bougainvillii
</td>
<td style="text-align:right;">
3001
</td>
</tr>
<tr>
<td style="text-align:left;">
Cassin's Auklet
</td>
<td style="text-align:left;">
Ptychoramphus aleuticus
</td>
<td style="text-align:right;">
2000
</td>
</tr>
<tr>
<td style="text-align:left;">
Red-footed Booby
</td>
<td style="text-align:left;">
Sula sula
</td>
<td style="text-align:right;">
802
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Skimmer
</td>
<td style="text-align:left;">
Rynchops niger
</td>
<td style="text-align:right;">
773
</td>
</tr>
<tr>
<td style="text-align:left;">
Semipalmated Sandpiper
</td>
<td style="text-align:left;">
Calidris pusilla
</td>
<td style="text-align:right;">
668
</td>
</tr>
<tr>
<td style="text-align:left;">
Sandhill Crane
</td>
<td style="text-align:left;">
Antigone canadensis
</td>
<td style="text-align:right;">
606
</td>
</tr>
<tr>
<td style="text-align:left;">
peep sp.
</td>
<td style="text-align:left;">
Calidris sp. (peep sp.)
</td>
<td style="text-align:right;">
595
</td>
</tr>
<tr>
<td style="text-align:left;">
Least Sandpiper
</td>
<td style="text-align:left;">
Calidris minutilla
</td>
<td style="text-align:right;">
518
</td>
</tr>
<tr>
<td style="text-align:left;">
Black-browed Albatross
</td>
<td style="text-align:left;">
Thalassarche melanophris
</td>
<td style="text-align:right;">
501
</td>
</tr>
</tbody>
</table>
In the code below, I am calculating the overall number of sights (reviewed and not) and the different number of species per country.

``` r
df3<-df2 %>%  group_by(countryCode) %>%  
  summarise(allsights= sum(howMany), num_species= length(sciName)) 
df3 %>% arrange(desc(allsights)) %>%  kable( "html") %>%
  kable_styling(bootstrap_options = "striped", full_width = F)
```

<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
countryCode
</th>
<th style="text-align:right;">
allsights
</th>
<th style="text-align:right;">
num\_species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
PE
</td>
<td style="text-align:right;">
16519
</td>
<td style="text-align:right;">
744
</td>
</tr>
<tr>
<td style="text-align:left;">
US
</td>
<td style="text-align:right;">
8291
</td>
<td style="text-align:right;">
947
</td>
</tr>
<tr>
<td style="text-align:left;">
EC
</td>
<td style="text-align:right;">
5867
</td>
<td style="text-align:right;">
1182
</td>
</tr>
<tr>
<td style="text-align:left;">
AR
</td>
<td style="text-align:right;">
5322
</td>
<td style="text-align:right;">
683
</td>
</tr>
<tr>
<td style="text-align:left;">
MX
</td>
<td style="text-align:right;">
4788
</td>
<td style="text-align:right;">
959
</td>
</tr>
<tr>
<td style="text-align:left;">
CO
</td>
<td style="text-align:right;">
3207
</td>
<td style="text-align:right;">
1219
</td>
</tr>
<tr>
<td style="text-align:left;">
BR
</td>
<td style="text-align:right;">
3145
</td>
<td style="text-align:right;">
1122
</td>
</tr>
<tr>
<td style="text-align:left;">
CL
</td>
<td style="text-align:right;">
2524
</td>
<td style="text-align:right;">
297
</td>
</tr>
<tr>
<td style="text-align:left;">
CA
</td>
<td style="text-align:right;">
2125
</td>
<td style="text-align:right;">
367
</td>
</tr>
<tr>
<td style="text-align:left;">
VE
</td>
<td style="text-align:right;">
1947
</td>
<td style="text-align:right;">
430
</td>
</tr>
</tbody>
</table>
We can see here that Chile reports the lowest number of species but still reports more sightings than Canada. This is understandable since many birds had migrated south before winter started. It is less clear why the number is so low in Venezuela which is a tropical country. Other tropical countries such as Colombia and Ecuador have a high diversity of birds but do not report the sightings.

-   the Second hypothesis could be that sightings are related to population density since Colombia has the largest population density and also the largest amount of sightings.

``` r
df3%>% ggplot(aes(x= countryCode, y= allsights, colour= countryCode ))+ geom_point(aes(size= num_species))+labs(x= "countries", y= "number of sightings")+  guides(colour= FALSE)+ scale_colour_manual(values=brewer.pal(n=10, "Paired"))
```

![](HW10_files/figure-markdown_github/unnamed-chunk-15-1.png)

We can see that Argentina has a high number of sights and significantly more reviewed sights than all the other countries. This could suggest that there is more interest in this country for bird watching and studying.

In terms of biodiversity, Colombia and Brazil have more bird species which makes sense because they are tropical countries.

``` r
df2 %>% group_by(countryCode, obsReviewed) %>%  
  summarise(sights= sum(howMany), species= length(sciName)) %>%  kable( format = "html") %>%
  kable_styling("striped", full_width = F) %>%
  row_spec(0, color = "white", bold= TRUE, background= "darkgreen" ) %>% 
  row_spec(c(2,4, 6, 8, 10, 12, 14, 16, 18, 20), italic= TRUE, bold= TRUE, background= "lightyellow" ) 
```

<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: white;background-color: darkgreen;">
countryCode
</th>
<th style="text-align:left;font-weight: bold;color: white;background-color: darkgreen;">
obsReviewed
</th>
<th style="text-align:right;font-weight: bold;color: white;background-color: darkgreen;">
sights
</th>
<th style="text-align:right;font-weight: bold;color: white;background-color: darkgreen;">
species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AR
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
4815
</td>
<td style="text-align:right;">
673
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
AR
</td>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
TRUE
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
507
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
BR
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
3127
</td>
<td style="text-align:right;">
1118
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
BR
</td>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
TRUE
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
18
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
CA
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
2026
</td>
<td style="text-align:right;">
299
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
CA
</td>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
TRUE
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
99
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
68
</td>
</tr>
<tr>
<td style="text-align:left;">
CL
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
2445
</td>
<td style="text-align:right;">
274
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
CL
</td>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
TRUE
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
79
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
CO
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
3159
</td>
<td style="text-align:right;">
1208
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
CO
</td>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
TRUE
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
48
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
EC
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5650
</td>
<td style="text-align:right;">
1131
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
EC
</td>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
TRUE
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
217
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
51
</td>
</tr>
<tr>
<td style="text-align:left;">
MX
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
4782
</td>
<td style="text-align:right;">
954
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
MX
</td>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
TRUE
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
6
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
PE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
16486
</td>
<td style="text-align:right;">
738
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
PE
</td>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
TRUE
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
33
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
US
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
8057
</td>
<td style="text-align:right;">
797
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
US
</td>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
TRUE
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
234
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
150
</td>
</tr>
<tr>
<td style="text-align:left;">
VE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1946
</td>
<td style="text-align:right;">
429
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
VE
</td>
<td style="text-align:left;font-weight: bold;font-style: italic;background-color: lightyellow;">
TRUE
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
1
</td>
<td style="text-align:right;font-weight: bold;font-style: italic;background-color: lightyellow;">
1
</td>
</tr>
</tbody>
</table>
### STEP 3 MERGING BOTH DATASETS

Joining countries and bird dataframes to examine the relationship between sights and population.

``` r
both<-left_join(dfcountries2, df3, by= "countryCode")
```

    ## Warning: Column `countryCode` joining factors with different levels,
    ## coercing to character vector

``` r
both %>% arrange(desc(density)) %>% kable( "html") %>%
  kable_styling("striped", full_width = F) %>%
  column_spec(5, bold = T) %>%
  row_spec(1, bold = T, color = "white", background = "#D7261E")
```

<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
countryCode
</th>
<th style="text-align:left;">
countryName
</th>
<th style="text-align:right;">
pop
</th>
<th style="text-align:right;">
area
</th>
<th style="text-align:right;">
density
</th>
<th style="text-align:right;">
allsights
</th>
<th style="text-align:right;">
num\_species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: white;background-color: #D7261E;">
MX
</td>
<td style="text-align:left;font-weight: bold;color: white;background-color: #D7261E;">
Mexico
</td>
<td style="text-align:right;font-weight: bold;color: white;background-color: #D7261E;">
112468855
</td>
<td style="text-align:right;font-weight: bold;color: white;background-color: #D7261E;">
1972550
</td>
<td style="text-align:right;font-weight: bold;font-weight: bold;color: white;background-color: #D7261E;">
57.016986
</td>
<td style="text-align:right;font-weight: bold;color: white;background-color: #D7261E;">
4788
</td>
<td style="text-align:right;font-weight: bold;color: white;background-color: #D7261E;">
959
</td>
</tr>
<tr>
<td style="text-align:left;">
EC
</td>
<td style="text-align:left;">
Ecuador
</td>
<td style="text-align:right;">
14790608
</td>
<td style="text-align:right;">
283560
</td>
<td style="text-align:right;font-weight: bold;">
52.160418
</td>
<td style="text-align:right;">
5867
</td>
<td style="text-align:right;">
1182
</td>
</tr>
<tr>
<td style="text-align:left;">
CO
</td>
<td style="text-align:left;">
Colombia
</td>
<td style="text-align:right;">
47790000
</td>
<td style="text-align:right;">
1138910
</td>
<td style="text-align:right;font-weight: bold;">
41.961173
</td>
<td style="text-align:right;">
3207
</td>
<td style="text-align:right;">
1219
</td>
</tr>
<tr>
<td style="text-align:left;">
US
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:right;">
310232863
</td>
<td style="text-align:right;">
9629091
</td>
<td style="text-align:right;font-weight: bold;">
32.218292
</td>
<td style="text-align:right;">
8291
</td>
<td style="text-align:right;">
947
</td>
</tr>
<tr>
<td style="text-align:left;">
VE
</td>
<td style="text-align:left;">
Venezuela
</td>
<td style="text-align:right;">
27223228
</td>
<td style="text-align:right;">
912050
</td>
<td style="text-align:right;font-weight: bold;">
29.848394
</td>
<td style="text-align:right;">
1947
</td>
<td style="text-align:right;">
430
</td>
</tr>
<tr>
<td style="text-align:left;">
BR
</td>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:right;">
201103330
</td>
<td style="text-align:right;">
8511965
</td>
<td style="text-align:right;font-weight: bold;">
23.625958
</td>
<td style="text-align:right;">
3145
</td>
<td style="text-align:right;">
1122
</td>
</tr>
<tr>
<td style="text-align:left;">
PE
</td>
<td style="text-align:left;">
Peru
</td>
<td style="text-align:right;">
29907003
</td>
<td style="text-align:right;">
1285220
</td>
<td style="text-align:right;font-weight: bold;">
23.269948
</td>
<td style="text-align:right;">
16519
</td>
<td style="text-align:right;">
744
</td>
</tr>
<tr>
<td style="text-align:left;">
CL
</td>
<td style="text-align:left;">
Chile
</td>
<td style="text-align:right;">
16746491
</td>
<td style="text-align:right;">
756950
</td>
<td style="text-align:right;font-weight: bold;">
22.123642
</td>
<td style="text-align:right;">
2524
</td>
<td style="text-align:right;">
297
</td>
</tr>
<tr>
<td style="text-align:left;">
AR
</td>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:right;">
41343201
</td>
<td style="text-align:right;">
2766890
</td>
<td style="text-align:right;font-weight: bold;">
14.942120
</td>
<td style="text-align:right;">
5322
</td>
<td style="text-align:right;">
683
</td>
</tr>
<tr>
<td style="text-align:left;">
CA
</td>
<td style="text-align:left;">
Canada
</td>
<td style="text-align:right;">
33679000
</td>
<td style="text-align:right;">
9984670
</td>
<td style="text-align:right;font-weight: bold;">
3.373071
</td>
<td style="text-align:right;">
2125
</td>
<td style="text-align:right;">
367
</td>
</tr>
</tbody>
</table>
-   Here we can refute the initial hypothesis. Colombia, Argentina and Peru have smaller population than Brazil but they report more sightings.

``` r
ggplot(both, aes(x= pop/10^6, y= allsights, size=num_species ))+ 
  geom_point(aes(colour= countryName))+ 
  labs(x= "Population in millions", y= "number of sightings")+ 
  scale_x_continuous(breaks = seq(0, 320, by = 20))+ 
  scale_colour_manual(values=brewer.pal(n=10, "Paired"))
```

![](HW10_files/figure-markdown_github/unnamed-chunk-18-1.png)

The second hypothesis also fails since Argentina has a low population density but large number of sightings.

``` r
ggplot(both, aes(x= density, y= num_species))+ 
  geom_point(colour= "gray")+
  geom_line(linetype = "dotdash", colour= "darkgreen")+
  geom_text(label= both$countryName)+ 
  labs(x= "Population Density per sqrkm", y= "number of species")+ 
  scale_x_continuous(breaks = seq(0, 60, by = 5))
```

![](HW10_files/figure-markdown_github/unnamed-chunk-19-1.png)

REFLECTION
----------

I worked on this assignment on my own because it was difficult to find someone who was not in a group yet and had familiarity with R programming language. I wanted to use and improve my programming skills and explore new R libraries, API queries and visualization software to go an extra mile. I felt it was not fair the partner with someone with no coding background. This took me a lot of troubleshooting and time but I am glad that I could do it.

*CHALLENGES:*

I put a lot of effort into this assignment and I had to overcome some technical changes related to coding. I was familiar with R programming language but I was not familiar with many libraries that I used in this assignment. Using regular expressions and well as using functions to map multilayered list forced me to do research and learn how to achieve it.

Describing the code: One common problem in programming is that people who write code assume that other people will understand it and put little effort to make it readable. I tried to write code in a simplified way and described it step by step to make it understandable. I included some technical definitions and R terminology to make sure that everything is clear and the progress in the analysis is easy to follow.

I wish I had the more statistical knowledge to do more in-depth analysis and get more insightful results. However, as it was not the goal of this assignment, I left it as something that could be done in the future.
